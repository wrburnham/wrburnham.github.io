(this["webpackJsonplibwebp-encode"]=this["webpackJsonplibwebp-encode"]||[]).push([[0],{43:function(e,t,a){e.exports=a(56)},48:function(e,t,a){},51:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(13),i=a.n(o),c=(a(48),a(32)),l=a(33),s=a(22),u=a(37),d=a(36),m=a(35),h=a(71),b=a(75),v=a(72),g=a(74),p=a(76),f=(a(51),a(15)),y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).defaultQuality=80,r.state={inputImage:null,quality:r.defaultQuality,processing:!1},r.convertLabel="Convert",r.handleConvert=r.handleConvert.bind(Object(s.a)(r)),r.handleQualityChange=r.handleQualityChange.bind(Object(s.a)(r)),r}return Object(l.a)(a,[{key:"handleAccepted",value:function(e){if(0===e.length)f.b.error("No file specified.");else if(1!==e.length)f.b.error("Cannot process multiple files.");else{var t=e[0];this.setState({inputImage:t}),f.b.info("File "+t.name+' was successfully read. Click "'+this.convertLabel+'" to get a WebP image.')}}},{key:"convertError",value:function(){f.b.error("An error occurred and the image could not be converted."),this.resetState()}},{key:"resetState",value:function(){this.setState({inputImage:null,quality:this.defaultQuality,processing:!1})}},{key:"handleConvert",value:function(){var e=this;this.setState({processing:!0});var t=URL.createObjectURL(this.state.inputImage),a=new Image;try{a.onload=function(){if(URL.revokeObjectURL(t),a.width+a.height===0)e.convertError();else{var r=e.convertedImg;void 0===r.src||null===r.src||""===r.src.trim()||URL.revokeObjectURL(r.src);try{e.canvas.width=a.width,e.canvas.height=a.height;var n=e.canvas.getContext("2d");n.drawImage(a,0,0);var o=n.getImageData(0,0,a.width,a.height);e.encode(o,e.state.quality,(function(t){try{var a=URL.createObjectURL(new Blob([t],{type:"image/webp"}));r.src=a;var n="Converted "+e.state.inputImage.name+" with "+e.state.quality+"% quality.";f.b.info(n),e.resetState()}catch(o){f.b.warn("The converted image may not have been rendered correctly."),e.resetState()}}))}catch(i){e.convertError()}}},a.onerror=function(){e.convertError()},a.src=t}catch(r){this.convertError()}}},{key:"handleQualityChange",value:function(e,t){this.setState({quality:t})}},{key:"encode",value:function(e,t,a){window.WebP().then((function(r){var n={version:r.cwrap("version","number",[]),create_buffer:r.cwrap("create_buffer","number",["number","number"]),destroy_buffer:r.cwrap("destroy_buffer","",["number"]),encode:r.cwrap("encode","",["number","number","number","number"]),get_result_pointer:r.cwrap("get_result_pointer","number",""),get_result_size:r.cwrap("get_result_size","number",""),free_result:r.cwrap("free_result","",["number"])},o=n.create_buffer(e.width,e.height);r.HEAP8.set(e.data,o),n.encode(o,e.width,e.height,t);var i=n.get_result_pointer(),c=n.get_result_size(),l=new Uint8Array(r.HEAP8.buffer,i,c),s=new Uint8Array(l);n.free_result(i),n.destroy_buffer(o),a(s)}))}},{key:"valuetext",value:function(e){return"".concat(e,"%")}},{key:"render",value:function(){var e=this,t={bgcolor:"background.default",color:"primary.light",style:{fontWeight:"bold",borderWidth:"2px",borderStyle:"dashed",textAlign:"center",cursor:"pointer",marginBottom:"1rem"}},a={style:{marginBottom:"1rem",marginTop:"2rem"}},r={style:{paddingBottom:"1rem",paddingTop:"1rem"}};return n.a.createElement(h.a,null,n.a.createElement("h1",null,"WebP Encoder"),n.a.createElement("p",null,"Convert an image to Google's WebP format in your web browser. No server side processing is done (all data stays on the client). The converted webp image will be shown in the browser window."),n.a.createElement(g.a,a,n.a.createElement(m.a,{onDrop:function(t){return e.handleAccepted(t)}},(function(e){var a=e.getRootProps,o=e.getInputProps;return n.a.createElement("section",null,n.a.createElement("div",a(),n.a.createElement("input",o()),n.a.createElement(g.a,t,n.a.createElement("p",r,"Drop an image here or click to select."))))}))),n.a.createElement(g.a,a,n.a.createElement(v.a,{id:"webp-encode-quality",gutterBottom:!0},"Quality (%)"),n.a.createElement(b.a,{onChange:this.handleQualityChange,value:this.state.quality,getAriaValueText:this.valuetext,"aria-labelledby":"webp-encode-quality",step:1,min:0,max:100,valueLabelDisplay:"auto"})),n.a.createElement(g.a,a,n.a.createElement(p.a,{color:"primary",variant:"contained",disabled:null===this.state.inputImage||!0===this.state.processing,onClick:this.handleConvert},n.a.createElement("p",null,this.convertLabel))),n.a.createElement(g.a,a,n.a.createElement("img",{ref:function(t){return e.convertedImg=t},className:"preview",alt:""})),n.a.createElement("canvas",{ref:function(t){return e.canvas=t},className:"hidden"}))}}]),a}(n.a.Component);a(54),a(55);var w=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(y,null),n.a.createElement(f.a,{autoClose:2500}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.d86cc552.chunk.js.map